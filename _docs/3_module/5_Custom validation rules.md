# ğŸ§© Ã–zel DoÄŸrulama KurallarÄ±

Ã–zel doÄŸrulama kurallarÄ±ndan bahsedelim. Bu konuyu daha Ã¶nce bu derste ele almÄ±ÅŸtÄ±m, ancak tekrar etmeye deÄŸer. MÃ¼mkÃ¼n olduÄŸunda yerleÅŸik Laravel doÄŸrulama kurallarÄ±nÄ± kullanmalÄ±sÄ±nÄ±z. Gereksinimlerin Ã§oÄŸu iÃ§in yeterli sayÄ±da kural vardÄ±r ve Ã§oÄŸu kombinasyon bu kurallarla oluÅŸturulabilir. AyrÄ±ca bu kurallar kendi yapÄ±larÄ± iÃ§inde yoÄŸun ÅŸekilde test edilmiÅŸtir. GerÃ§ekten Ã¶zel bir doÄŸrulama kuralÄ±na ihtiyaÃ§ duyduÄŸunuzdan emin olun. Tek seferlik Ã¶zel doÄŸrulama kurallarÄ± iÃ§in closures kullanabilirsiniz.

Tek seferlik dediÄŸime Ã¶zellikle dikkat edin; Ã§Ã¼nkÃ¼ bir ÅŸey birden fazla doÄŸrulama yÄ±ÄŸÄ±nÄ±nda kullanÄ±lacaksa bir rule class hÃ¢line getirilmelidir. Bunu birazdan ele alacaÄŸÄ±m. Bu Ã¶rnekte bir guest count var. Bu alan required ve integer olmalÄ±. Ancak kullanÄ±cÄ±nÄ±n premium kullanÄ±cÄ± olup olmadÄ±ÄŸÄ±na gÃ¶re, ki bu bir hesaplama, premium ise 10 misafire, normal kullanÄ±cÄ± ise 5 misafire izin verilir. DoÄŸrulama kuralÄ± da bunu kontrol eder. EÄŸer benzersiz doÄŸrulama hesabÄ±m baÅŸarÄ±sÄ±z olursa, failed callback metodunu kullanabilir ve bu doÄŸrulama yÄ±ÄŸÄ±nÄ±nda bir hata oluÅŸturabilir. Genelde daha iyi bir seÃ§enek rule object kullanmaktÄ±r.

Rule objectâ€™ler, rule val iÃ§indeki validation rule interfaceâ€™ini implement eden sÄ±nÄ±flardÄ±r. Inline closure kullanmak yerine bu kuralÄ±n yeni bir Ã¶rneÄŸini oluÅŸturursunuz. Bu Ã¶rnekte kullanÄ±cÄ±dan bir product code isteniyor. UygulamanÄ±n kabul ettiÄŸi Ã¼Ã§ tarzda Ã¼rÃ¼n kodu var. P1 ile baÅŸlayan ve 5 ila 7 haneli bir numara iÃ§erenler, P2 ile baÅŸlayan ki aslÄ±nda sadece bir taneydi, ve en yenileri ise veritabanÄ±nda saklanan rastgele deÄŸerlerdir. Burada rule classâ€™Ä±nÄ±z bu koÅŸullara ve kontrollerine gÃ¶re false dÃ¶ner. AyrÄ±ca bir hata mesajÄ± metodu bulunur.

Rule classâ€™Ä±n gÃ¼zel yanÄ±, kapsÃ¼llenmiÅŸ olmasÄ±nÄ±n yanÄ±nda, aynÄ± doÄŸrulama isteÄŸi iÃ§inde birden Ã§ok alanda veya uygulamanÄ±z genelinde kullanÄ±labilmesidir. Ã–rneÄŸin, herhangi bir yerde Ã¼rÃ¼n numarasÄ± istiyorsam bu kuralÄ± kullanabilirim. YerleÅŸik doÄŸrulama kurallarÄ±ndan bazÄ±larÄ±, atandÄ±klarÄ± alanÄ± doÄŸrulama yÃ¼kÃ¼ndeki diÄŸer verilerle karÅŸÄ±laÅŸtÄ±rÄ±r. Siz de Ã¶zel doÄŸrulama kurallarÄ±nÄ±zda diÄŸer verilere eriÅŸme ihtiyacÄ± duyabilirsiniz. Closures kullanÄ±yorsanÄ±z ve bunlarÄ± genelde olduÄŸu gibi bir request class iÃ§inde yazÄ±yorsanÄ±z, this Ã¶rneÄŸine eriÅŸiminiz olur ve request tabanlÄ± tÃ¼m metodlarÄ± kullanabilirsiniz. Bir rule object kullanÄ±yorsanÄ±z, ihtiyaÃ§ duyulan veriyi veya tÃ¼m request verisini constructor Ã¼zerinden gÃ¶ndermenizi Ã¶neririm. Bu Ã¶rnekte olduÄŸu gibi, iÃ§inde bulunduÄŸunuz request classâ€™Ä±n kendisidir.

Sonra burada gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z gibi bunu rule objectâ€™te bir property olarak saklayabilirsiniz. Bu Ã¶rnek itiraf etmem gerekirse oldukÃ§a uydurma bir Ã¶rnek, ve bunu sÃ¶ylemiÅŸken, artÄ±k o kadar Ã§ok yerleÅŸik doÄŸrulama kuralÄ± olduÄŸu iÃ§in Ã¶zel doÄŸrulama kurallarÄ± iÃ§in iyi Ã¶rnekler dÃ¼ÅŸÃ¼nmek giderek zorlaÅŸÄ±yor. Ama neyse, Ã¶rnekte gÃ¶rdÃ¼ÄŸÃ¼nÃ¼z gibi doÄŸrulama sÃ¼recinin bir parÃ§asÄ± olarak diÄŸer alan deÄŸerleriyle karÅŸÄ±laÅŸtÄ±rma yapÄ±yor. EÄŸer bir request class kullanmÄ±yorsanÄ±z, diÄŸer verileri doÄŸrudan request facade Ã¼zerinden all metodunu ya da uygun baÅŸka bir metodu Ã§aÄŸÄ±rarak alabilirsiniz. YerleÅŸik Laravel kurallarÄ± yerine Ã¶zel doÄŸrulama kurallarÄ± kullanmak isteyebileceÄŸiniz baÅŸka nedenler de vardÄ±r. Bu Ã¶rnekte kullanÄ±cÄ±ya password deÄŸiÅŸtirme izni veriyoruz ve burada karmaÅŸÄ±k password gereksinimleri oluÅŸturabilen kapsamlÄ± bir password rule class kullanÄ±lÄ±yor. Son satÄ±r uncompromised metodudur.

Bu metod, passwordâ€™Ã¼n bir veri sÄ±zÄ±ntÄ±sÄ±nda kullanÄ±lÄ±p kullanÄ±lmadÄ±ÄŸÄ±nÄ± gÃ¶rmek iÃ§in have I been pwned sitesine istek gÃ¶nderir. Bu metodun implementasyonu oldukÃ§a gÃ¼venlidir ve buna odaklanmÄ±yoruz, ancak bunu yapamayacaÄŸÄ±nÄ±z zamanlar olabilir. Ã–rneÄŸin, bazÄ± gÃ¼venli ortamlarda Ã¼Ã§Ã¼ncÃ¼ taraflara eriÅŸim yasaktÄ±r veya sunucudan dÄ±ÅŸarÄ±ya yapÄ±lan istekler engellenmiÅŸtir. Bu durumda have I been pwned kullanamÄ±yorsak, en azÄ±ndan bu passwordâ€™Ã¼n en yaygÄ±n kullanÄ±lan ÅŸifrelerden biri olmadÄ±ÄŸÄ±nÄ± kontrol etmek isterim. Her password alanÄ±nda kullanmak istediÄŸim iÃ§in buna not Common password adÄ±nÄ± vereceÄŸim. SonrasÄ±nda bu rule iÃ§inde son yÄ±llarÄ±n en yaygÄ±n ÅŸifrelerinin bir listesini oluÅŸturup deÄŸerin bu listede olmadÄ±ÄŸÄ±ndan emin olurum. Ek bir not olarak, bu Ã¶rnekte boÅŸ deÄŸerlerin doÄŸrulamayÄ± tetiklememesine izin veren kural konvansiyonuna uyduÄŸumu belirtmeliyim.

DeÄŸer boÅŸsa geÃ§er, ya da boÅŸ deÄŸilse ve yaygÄ±n kullanÄ±lan ÅŸifreler listesinde deÄŸilse yine geÃ§er. BÃ¶ylece hem yaygÄ±n ÅŸifreleri kontrol eder hem de sunucunun dÄ±ÅŸarÄ±ya eriÅŸimini kÄ±sÄ±tlayan gÃ¼venlik kurallarÄ±na uymuÅŸ oluruz.
