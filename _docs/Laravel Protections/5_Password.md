# ğŸ” Parolalar

Bu video, en sevdiÄŸim konulardan biri olan parolalarÄ±n gÃ¼ncellenmesi hakkÄ±nda. Pek deÄŸil aslÄ±nda, ama Ã¶zellikle hash tÃ¼rlerini veya authentication mekanizmalarÄ±nÄ± deÄŸiÅŸtirirken yapÄ±lmasÄ± gereken bir ÅŸey. Burada buna odaklanacaÄŸÄ±z. UygulamanÄ±zÄ± eski bir Laravel sÃ¼rÃ¼mÃ¼yle geliÅŸtirdiyseniz hashing mekanizmalarÄ± o kadar gÃ¼Ã§lÃ¼ deÄŸildi veya belki de varsayÄ±lan yapÄ±landÄ±rmalarÄ± kullandÄ±nÄ±z, ancak ÅŸimdi hash gÃ¼cÃ¼nÃ¼ yÃ¼kseltmeniz gerekiyor. Bu durumda, Hash facadeâ€™Ä± needsRehash() metodunu saÄŸlar. Bu, mevcut hashâ€™i gÃ¼ncel olarak yapÄ±landÄ±rÄ±lmÄ±ÅŸ hash parametrelerine karÅŸÄ± kontrol eder ve veriyi yeniden hash etmeniz gerekip gerekmediÄŸini sÃ¶yler. Bu Ã¶rnekte, geÃ§erli bir parolam var, ancak mevcut yapÄ±landÄ±rmam daha saÄŸlam.

Hashâ€™imi needsRehash() metoduna aktarabilirim ve eÄŸer true dÃ¶nerse modelimi yeni yapÄ±landÄ±rmayla oluÅŸturulmuÅŸ yeni hash ile gÃ¼ncellerim. Åimdi, parolalarÄ± bir authentication veya hashing sisteminden baÅŸka bir sisteme taÅŸÄ±maktan bahsedelim. Senaryodan bahsedelim. MD5 gibi bir ÅŸeyle hashâ€™lenmiÅŸ parolalara sahip eski bir projeyi devralÄ±yorsunuz. Daha gÃ¼Ã§lÃ¼ bir hashing mekanizmasÄ± kullanmanÄ±z gerektiÄŸini biliyorsunuz, ancak iÅŸ â€” tÃ¼m kullanÄ±cÄ±larÄ± parolalarÄ±nÄ± sÄ±fÄ±rlamaya zorlamanÄ±za izin vermiyor. Yeni yazÄ±lÄ±m uygulamasÄ±nÄ± yayÄ±nlamamÄ±z gerekiyor. Ne yapacaksÄ±nÄ±z?

Laravel aslÄ±nda bunu kolaylaÅŸtÄ±rÄ±r. YapmamÄ±z gereken ilk ÅŸey yeni bir authentication adapter yazmak ve bunu yeni Laravel auth sistemine baÄŸlamak. Bu, sistemde yeni bir parola alanÄ± olup olmadÄ±ÄŸÄ±nÄ± kontrol edecek. EÄŸer varsa Laravelâ€™in yeni hash ve authentication sistemini kullanacak. Aksi takdirde eski authentication mantÄ±ÄŸÄ±na geri dÃ¶necek â€” ki muhtemelen eski sistemden bu adaptÃ¶re kopyalamanÄ±z gerekecek. ArdÄ±ndan sistemde, parolayÄ± Laravelâ€™in hash mekanizmasÄ±yla hashâ€™leyecek ve eski parolayÄ± veritabanÄ±ndan sileceksiniz. Bunu iki nedenle yapacaÄŸÄ±z.

Ä°lk olarak, hangi kullanÄ±cÄ±larÄ±n parolalarÄ±nÄ± taÅŸÄ±dÄ±ÄŸÄ±nÄ± gÃ¶rmek iÃ§in biraz gÃ¶rÃ¼nÃ¼rlÃ¼k saÄŸlar. Ä°kinci olarak, veritabanÄ± ele geÃ§irilirse zayÄ±f hashâ€™lerden hiÃ§birinin orada kalmasÄ±nÄ± istemeyiz, Ã¶zellikle kullanÄ±cÄ±lar aynÄ± parolayÄ± kullanÄ±yorsa. Bu kodun nasÄ±l gÃ¶rÃ¼ndÃ¼ÄŸÃ¼ne bakalÄ±m. Ä°lk olarak, standart bir Laravel kurulumunda kullanÄ±cÄ± iÃ§in yapÄ±lan database migrationâ€™Ä± burada. Parola alanÄ±nÄ± nullable yapÄ±yorum ve ardÄ±ndan nullable bir old password alanÄ± ekliyorum. Bu alanlardan birinin null olmasÄ±nÄ±n bunun ayarlanmadÄ±ÄŸÄ± anlamÄ±na geldiÄŸini varsayacaÄŸÄ±m. ArdÄ±ndan kullanÄ±cÄ± kayÄ±tlarÄ±mÄ± yeni Laravel uygulamama aktarÄ±rken eski hashâ€™leri old password alanÄ±na koyacaÄŸÄ±m. Sonraki adÄ±mda, old password alanÄ±nÄ± da iÃ§erecek ÅŸekilde user modelinin fillable Ã¶zelliÄŸini deÄŸiÅŸtirdiÄŸimi gÃ¶rebilirsiniz.

Eski parolayÄ± ayarlarken ve yenisini ayarlarken bunu hÄ±zlÄ± ve kolay ÅŸekilde deÄŸiÅŸtirebilmek istiyoruz. App service providerâ€™Ä±mÄ±zda legacy-passwords adlÄ± bir auth provider kaydedebiliriz. Bu, legacy password authentication serviceâ€™imizin yeni bir Ã¶rneÄŸini bazÄ± parametrelerle dÃ¶ndÃ¼recek. Bu parametreler legacy password authentication sÄ±nÄ±fÄ±na baktÄ±ÄŸÄ±mÄ±zda anlam kazanacak. Bu sÄ±nÄ±f mevcut sistemin kullandÄ±ÄŸÄ± varsayÄ±lan Eloquent user providerâ€™Ä±nÄ± geniÅŸletiyor. Bu yÃ¼zden o parametreleri aktardÄ±m Ã§Ã¼nkÃ¼ ne iseler, parent sÄ±nÄ±f tarafÄ±ndan ihtiyaÃ§ duyuluyorlar, dolayÄ±sÄ±yla onlarÄ± saÄŸladÄ±m. Benim sÃ¼rÃ¼mÃ¼mde override etmem gereken tek ÅŸey validate credentials metodu.

Eloquent providerâ€™daki kullanÄ±cÄ±yÄ± getirme ve parolayÄ± sÄ±fÄ±rlama gibi diÄŸer tÃ¼m metotlar gayet iyi. Bu, parent metodunla aynÄ± imzaya sahip, yani bir user ve credential dizisi kabul ediyor. Åimdi user auth passwordâ€™un boÅŸ olup olmadÄ±ÄŸÄ±nÄ± kontrol ediyor. Bu metot, Laravelâ€™in auth ve hash sisteminden hashâ€™i almak iÃ§in eklenmiÅŸ bir yardÄ±mcÄ± (helper). Ä°leriye atlarsak, eÄŸer boÅŸ deÄŸilse parent validate credentials mekanizmasÄ±nÄ± kullanacaÄŸÄ±z. Buraya dÃ¶nersek, boÅŸsa eski sistemi kullanacaÄŸÄ±z demektir. ParolamÄ± buradan alacaÄŸÄ±m.

Gelen MD5 hashâ€™in user Ã¼zerindeki old password alanÄ±yla eÅŸleÅŸip eÅŸleÅŸmediÄŸine gÃ¶re result deÄŸiÅŸkenini ayarlÄ±yorum. Bu geÃ§ip geÃ§mediÄŸi, bu metodun dÃ¶ndÃ¼receÄŸi gerÃ§ek sonuÃ§. Ama aynÄ± zamanda eÄŸer true ise kullanÄ±cÄ±yÄ± gÃ¼ncelleyebileceÄŸimi biliyorum. KullanÄ±cÄ±nÄ±n plaintext parolasÄ±nÄ± alÄ±p hashâ€™leyeceÄŸim ve bu kullanÄ±cÄ± Ã¼zerinde null old password ile birlikte kaydedeceÄŸim. ArtÄ±k user nesnesi yeni sistemle gÃ¼ncellenmiÅŸ, eski parola silinmiÅŸ ve bu authentication giriÅŸiminin baÅŸarÄ±lÄ± olduÄŸu dÃ¶ndÃ¼rÃ¼lmÃ¼ÅŸ oluyor. Son olarak yapmamÄ±z gereken tek ÅŸey Auth.php yapÄ±landÄ±rma dosyasÄ±na gidip driver adÄ±mÄ±z olan legacy passwordsâ€™Ã¼ oraya yazmak. ArtÄ±k hazÄ±rÄ±z.

KullanÄ±cÄ± parolalarÄ± gÃ¼ncelleniyor ve kÃ¶tÃ¼ bir kullanÄ±cÄ± deneyimi yaratmÄ±yoruz. Bunun pratikte nasÄ±l gÃ¶rÃ¼ndÃ¼ÄŸÃ¼ne bir demo ile bakalÄ±m. Altta, Tinker iÃ§inde kullanÄ±cÄ±ma bakÄ±yoruz, e-posta adresimin [aaron@example.com](mailto:aaron@example.com) olduÄŸunu gÃ¶rebilirsiniz. Laravelâ€™in kullanacaÄŸÄ± password alanÄ± null. Old password alanÄ± ise MD5 ile doldurulmuÅŸ. Bu bazÄ±larÄ±nÄ±za tanÄ±dÄ±k gelebilir. Password kelimesinin MD5â€™i.

Burada e-posta adresimle giriÅŸ yapacaÄŸÄ±m ancak authentication sisteminin beklendiÄŸi gibi Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± gÃ¶stermek iÃ§in yanlÄ±ÅŸ bir parola yazacaÄŸÄ±m. Åimdi gerÃ§ek parolayÄ± yazÄ±yorum. GiriÅŸ yaptÄ±m. Tinkerâ€™a geri dÃ¶ner ve kullanÄ±cÄ±yÄ± yeniden alÄ±rsam, password alanÄ±nÄ±n parolanÄ±n yeni hash versiyonuyla doldurulduÄŸunu ve old passwordâ€™un null olduÄŸunu gÃ¶rebilirsiniz. Ã‡Ä±kÄ±ÅŸ yapÄ±p tekrar denersem yeni Laravel sistemi devralÄ±r ve yine password parolasÄ±yla giriÅŸ yapabilirim. MÃ¼kemmel.
